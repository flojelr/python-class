# 《Python程序设计基础》程序设计作品说明书

题目： 外星人入侵游戏

班级： 21计科03

姓名： 曾靖

学号： B20210302312

指导教师： 周景

起止日期：2023.11.10-2023.12.10

## 摘要

本次设计完成了一个名为“外星人入侵”的游戏，该游戏使用pygame游戏框架进行开发。在游戏中，玩家可以通过四个方向键（上、下、左、右）来控制飞船的移动，通过按下空格键来发射子弹，击败外星人并获得分数。

游戏关卡的设计考虑了玩家的技能水平和挑战性。在每个关卡中，外星人的数量和速度逐渐增加，玩家需要不断提高自己的技巧才能顺利过关。当玩家成功击败屏幕上所有的外星人后，游戏将升级并进入下一关。随着关卡级别的提高，外星人的速度会逐渐增加，同时击败外星人获得的分数也会相应增加。

游戏还提供了计分功能，根据玩家击败的外星人数目来计算得分。这使得玩家可以更好地了解自己的游戏进展情况，并努力追求更高的分数。

总之，本次设计完成的“外星人入侵”游戏是一款基于pygame游戏框架的有趣、具有挑战性和可玩性的游戏。玩家可以通过不断地挑战和升级来提高自己的技能水平，同时也可以在游戏中获得乐趣和满足感

关键词：python程序，pygame游戏框架

## 第1章 需求分析

该游戏是一个基于外星人入侵主题的射击游戏，主要实现功能包括创建1200x800的游戏窗口、添加飞船和外星人图像、驾驶飞船、射击子弹、外星人移动和射杀、结束游戏条件、Play按钮、等级提升、计分功能等。同时，游戏还增加了星星背景装饰、Pause or Continue按键以及游戏暂停功能，提高了游戏的趣味性和互动性。玩家需要使用方向键控制飞船移动，空格键发射子弹，射杀移动速度逐渐增加的外星人，避免外星人到达屏幕左侧或碰撞飞船导致游戏结束。玩家可以通过不断射杀外星人提高得分和游戏等级，最高分将被保存到文件中。游戏过程中，玩家可以点击Play按钮开始游戏，点击Pause or Continue按键暂停或继续游戏。

具体需求分析如下：

1. 游戏窗口：

   - 游戏应在一个1200x800的窗口中运行。
   - 窗口背景颜色为暗紫色。
   - 在窗口的顶部的左侧剩余飞船数量。
   - 在窗口的顶部的右侧显示当前等级和得分。
   - 在窗口的顶部的中间显示最高分。

2. 飞船图像：

    - 游戏开始时，应在屏幕左侧的中间显示一艘飞船。
    - 飞船应使用图像来表示，图像从文件中加载。
    - 飞船初始位置在屏幕左侧中间，随着游戏级别的提高，飞船移动速度会增加。

3. 驾驶飞船：

    - 玩家可以使用四个方向键（上、下、左、右）来控制飞船的移动。
    - 玩家可以通过按下空格键来发射子弹。a
    - 飞船的移动和射击应该根据玩家的输入做出响应。

4. 飞船可以射击子弹：

    - 当玩家按下空格键时，飞船应该发射一个子弹。
    - 子弹应该从飞船的射击口射出，并沿一定角度向前飞行。
    - 子弹应该在一定时间内被消除，否则会留在屏幕上一段时间。

5. 创建一群外星人：

    - 游戏开始时，应在屏幕右侧显示一群外星人。
    - 外星人应使用图像来表示，图像从文件中加载。
    - 外星人初始位置在飞船右侧并与飞船保持一定距离，随着游戏级进行，外星人会逐渐向左移动，随着游戏级别的提高，外星人移动速度也会逐渐增加。

6. 可以射杀外星人：

    - 当玩家驾驶飞船移动到外星人所在的行时，玩家可以通过发射子弹来射杀外星人。
    - 如果玩家成功射杀外星人，玩家会获得一定的分数奖励。

7. 结束游戏：

    - 如果外星人到达屏幕的左侧边缘，若剩余飞船数量不为零则飞船数量减一，分数不变、游戏等级不变刷新外星人继续进行游戏；若飞船剩余数量为零则游戏结束。
    - 当外星人碰撞到飞船时，若剩余飞船数量不为零则飞船数量减一，分数不变、游戏等级不变刷新外星人继续进行游戏；若飞船剩余数量为零则游戏结束。
    - 游戏结束时，应在屏幕上游戏画面暂停，显示Play按键。

8. Play按钮：

    - 在游戏窗口的中间显示一个Play按钮，用于开始游戏。
    - 当玩家点击Play按钮时，游戏开始，所有外星人和得分重置。

9. 提高等级：

    - 随着游戏级别的提高，外星人的移动速度会增加。
    - 随着游戏级别的提高，玩家需要射击更快的外星人来保持游戏挑战性。

10. 计分功能：

    - 游戏应该记录玩家的得分，并根据玩家射杀的外星人数目进行增加。
    - 当前得分和最高得分在游戏中实时显示。
    - 最高分需要用文件进行保存，以保证下一次启动游戏时能显示前面得到的最高分。

11. 在游戏背景中随机位置绘制星星：

    - 在游戏背景中随机位置绘制一些星星作为背景装饰。

12. Pause or Continue按键：

    - 在屏幕底部的左边显示一个Pause or Continue按键，用于暂停或者继续游戏。
    - 在游戏进行过程中，点击Pause or Continue按键可以暂停正在进行的游戏。
    - 当游戏已经暂停时，再点击Pause or Continue按键可以从暂停位置继续进行游戏。

13. 游戏暂停

    - 游戏暂停可以通过点击屏幕上的Pause or Continue按键实现或者通过按下键盘上的P键实现
    - 当游戏暂停时，屏幕上显示暂停时游戏进行到的画面，并在屏幕中间显示“Game Pasued!!!”来提醒玩家游戏暂停了
    - 想要继续游戏同样是可以通过点击屏幕上的Pause or Continue按键实现或者通过按下键盘上的P键实现

## 第2章 分析与设计

_本章的内容主要包括系统的设计，例如：系统架构、系统流程、系统模块、数据库的设计，以及关键的实现，例如：使用的数据结果、算法。_

该游戏是基于pygame游戏框架开发的一款射击游戏。首先，系统会展示一个包含外星人方阵、飞船、游戏等级、得分、最高分、剩余飞船数量以及Play和Pause or Continue按键的游戏窗体。玩家点击Play按键后，游戏开始，外星人方阵开始运动，玩家可操作飞船射击外星人并实时显示当前得分。若当前得分高于最高分，最高分也会实时更新。在游戏中，玩家有4次死亡机会，第四次死亡时游戏结束，Play按键重新显示。此外，玩家可以通过按下p键或点击Pause or Continue按键来暂停或继续游戏。

在系统设计方面，我们采用了模块化的架构，包括游戏窗体显示模块、外星人与飞船运动控制模块、得分计算与更新模块以及按键响应处理模块。这种模块化设计使得代码更加清晰、易于维护和扩展。

在关键实现方面，我们使用了pygame游戏框架提供的数据结构和函数库来处理图像渲染、事件响应和游戏逻辑。通过精心设计的算法和数据结构，我们实现了高效的碰撞检测、得分计算和游戏状态管理。

此外，我们没有使用传统的数据库系统来存储游戏数据，而是采用了文件存储的方式来实现最高分的保存与读取。这种方法简化了数据管理的复杂性，提高了系统的运行效率。

## 第3章 软件测试

_本章的内容主要包括以类和函数作为单元进行单元测试，编写的对系统的主要功能的测试用例，以及测试用例执行的测试报告。_

1. 对游戏窗体大小进行测试

    | # | 测试目标 | 输入 | 预期结果 | 测试结果 |
    | :----:| :----: | :----: | :----: | :----: |
    | 1 | 当前窗体大小 | 1200*800 | True | True |

2. 对刚创建的外星人是否在屏幕边缘进行测试

    | # | 测试目标 | 输入 | 预期结果 | 测试结果 |
    | :----:| :----: | :----: | :----: | :----: |
    | 1 | 外星人被创建时是否在屏幕边缘 | NULL | True | True |

3. 对飞船、子弹、外星人的移动速度以及击败外星人得分的增长进行测试

    输入的数据按顺序分别是：飞船初始速度，子弹初始速度，外星人初始速度，击败外星人初始得分，速度增长率，分数增长率。

    结果的顺序是：飞船增长后的速度，子弹增长后的速度，外星人增长后的速度，击败外星人增长后的得分。

    | # | 测试目标 | 输入 | 预期结果 | 测试结果 |
    | :-----| ----: | :----: | :----: | :----: |
    | 1 | 符合期望的参数化测试 | 1.0,1.0,1.0,50,2.0,2.0 | 2.0,2.0,2.0,100 | 2.0,2.0,2.0,100 |
    | 2 | 符合期望的参数化测试 | 0.5,0.5,0.5,20,3.0,1.5 | 1.5, 1.5, 1.5, 30 | 1.5, 1.5, 1.5, 30 |
    | 3 | 符合期望的参数化测试 | 3.0, 4.0, 2.0, 10, 1.1, 1.2 | 3.3, 4.4, 2.2, 12 | 3.3, 4.4, 2.2, 12 |
    | 4 | 边缘情况的参数化测试 | 0.0, 0.0, 0.0, 0, 2.0, 2.0 | 0.0, 0.0, 0.0, 0 | 0.0, 0.0, 0.0, 0 |
    | 5 | 边缘情况的参数化测试 | -1.0, -1.0, -1.0, 50, 2.0, 2.0 | -2.0, -2.0, -2.0, 100 | -2.0, -2.0, -2.0, 100 |
    | 6 | 错误情况的参数化测试 | "fast", 1.0, 1.0, 50, 2.0, 2.0 | Non-numeric speed | Non-numeric speed |
    | 7 | 错误情况的参数化测试 | 1.0, "fast", 1.0, 50, 2.0, 2.0 | Non-numeric speed | Non-numeric speed |
    | 8 | 错误情况的参数化测试 | 1.0, 1.0, "fast", 50, 2.0, 2.0 | Non-numeric speed | Non-numeric speed |
    | 8 | 错误情况的参数化测试 | 1.0, 1.0, 1.0, "fifty", 2.0, 2.0 | Non-numeric points | Non-numeric points |

## 结论

首先，该项目成功创建了一个游戏窗口，并在其中展示了外星人方阵、飞船以及相关的游戏信息。通过使用pygame游戏框架，我们能够控制飞船的移动和射击行为，同时实时更新游戏得分和等级。

项目的核心目标是提供一个具有挑战性的游戏体验，其中玩家需要操作飞船来射击外星人，并争取获得更高的得分。在实现这个目标的过程中，我们注意到了一些关键的功能，如碰撞检测算法的使用，确保了飞船和外星人之间的交互能够准确无误地进行。

然而，我们也发现了一些不足之处。例如，游戏流程相对简单，缺乏多样化的游戏玩法和难度等级。此外，虽然我们实现了Play和Pause or Continue按键的控制，但用户界面仍需进一步优化以提高易用性。

为了改进这些不足，我们可以考虑增加更多的游戏元素和玩法，例如不同的飞船、敌人和道具，以及更具挑战性的关卡设计。同时，可以进一步精简用户界面，突出核心游戏信息并提高直观性。

综上所述，通过对项目的总结和反思，我们可以更好地理解其功能、目标和可改进之处。通过不断优化和完善，相信这个项目将为玩家带来更加丰富和令人满意的游戏体验。

## 参考文献

[1]美 斯维加特 (Sweigart, Al).Python游戏编程快速上手[M].人民邮电出版社,2016.

[2] Bucchiarone A， Savary-Leblanc M ， Pallec X L ，et al.基于游戏化模型的工程：PapyGame工具[J].计算机编程科学， 2023.DOI：10.1016/j.scico.2023.102974.

[3]郑颜华.使用python的pygame模块制作一个贪吃蛇游戏[J].数码设计.CG WORLD， 2020， 009（014）: P.46-47.
